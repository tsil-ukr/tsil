взяти визначення ./ПМ;
взяти визначення ./КЦ;

зовнішня дія розпочати(кількість_аргументів: позитивне, аргументи: памʼять<КЦ::Байти>): ц32 {
  змінна виділяч = біб::отримати_системний_виділяч();

  змінна компілятор = КЦ::створити_компілятор(виділяч);

  якщо КЦ::отримати_поточну_директорію_процесу(компілятор, компілятор.кореневий_шлях::адреса) == ні {
    // потім: помилка
  }

  змінна помилка: адреса<КЦ::Помилка> = пусто;

  якщо КЦ::взяти_файл_ю8(компілятор, КЦ::Шлях { аргументи[1].розмір, аргументи[1].дані }, помилка::адреса) == ні {
    змінна текст_коду = помилка.місцезнаходження.текст_коду;

    якщо помилка.місцезнаходження != пусто {
      біб::вивести_ю8(ю8 { текст_коду.шлях.розмір, текст_коду.шлях.дані });
      біб::вивести(":");
      біб::вивести_позитивне(помилка.місцезнаходження.рядок);
      біб::вивести(":");
      біб::вивести_позитивне(помилка.місцезнаходження.стовпець);
      біб::вивести(" помилка: ");
    }

    змінна повідомлення_ю8 = КЦ::отримати_ю8_з_т8(компілятор, помилка.повідомлення);
    біб::надрукувати_ю8(повідомлення_ю8);
    КЦ::звільнити_памʼять(компілятор, повідомлення_ю8.дані);

    якщо помилка.місцезнаходження != пусто {
      змінна витнутний_текст = КЦ::розбирач::витнути_значення_ю8(
        ю8 { помилка.місцезнаходження.текст_коду.оригінальне_значення.розмір, помилка.місцезнаходження.текст_коду.оригінальне_значення.дані },
        текст_коду.місцезнаходження_оригінального_значення.дані[помилка.місцезнаходження.позиція_в_тексті],
        100
      );

      змінна позитивне_ю8 = біб::перетворити_позитивне_на_ю8(компілятор.виділяч, помилка.місцезнаходження.рядок);
      біб::вивести_ю8(позитивне_ю8);
      біб::вивести("| ");
      біб::надрукувати_ю8(витнутний_текст.витнуте_значення);
      змінна п: позитивне = 0;
      поки п < (витнутний_текст.початок_підкреслення + позитивне_ю8.розмір + 2) {
        біб::вивести(" ");
        п += 1;
      }
      біб::надрукувати("∧");

      біб::звільнити_памʼять(виділяч, позитивне_ю8.дані);
    }

    КЦ::знищити_помилку(компілятор, помилка);
    КЦ::знищити_компілятор(компілятор);

    вернути 1;
  }

  змінна лл = ю8 { 0, пусто };

  якщо КЦ::отримати_лл(компілятор, лл::адреса, помилка::адреса) == ні {
    змінна повідомлення_ю8 = КЦ::отримати_ю8_з_т8(компілятор, помилка.повідомлення);
    біб::надрукувати_ю8(повідомлення_ю8);
    КЦ::звільнити_памʼять(компілятор, повідомлення_ю8.дані);

    КЦ::знищити_помилку(компілятор, помилка);
    КЦ::знищити_компілятор(компілятор);

    вернути 1;
  }

  біб::надрукувати_ю8(лл);

  КЦ::знищити_компілятор(компілятор);

  вернути 0;
}