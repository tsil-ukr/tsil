взяти визначення КЦ;

секція КЦ {
  зовнішня дія скомпілювати_якщо(компілятор: адреса<Компілятор>, контекст: Контекст, дані_якщо: розбирач::ДаніСполукиЯкщо, місцезнаходження: розбирач::Місцезнаходження): Результат {
    змінна результат_компіляції_умови = скомпілювати_значення_як_значення(
      компілятор,
      контекст,
      дані_якщо.умова,
      компілятор.тип_логічне
    );

    якщо результат_компіляції_умови.помилка != пусто {
      вернути Результат { помилка = результат_компіляції_умови.помилка };
    }

    змінна обʼєкт_значення_умови = результат_компіляції_умови.обʼєкт_значення;
    якщо обʼєкт_значення_умови.тип != компілятор.тип_логічне {
      вернути Результат {
        помилка = створити_помилку(
          компілятор,
          "Умова має бути логічним.",
          створити_місцезнаходження_помилки_з_місцезнаходження_розбирача(компілятор, контекст.розібраний_текст, місцезнаходження)
        )
      };
    }

    змінна пм_крок_тіла_якщо = ПМ::створити_крок(контекст.кк_дії.обʼєкт_дії.пм_інструкція, "тіло_якщо");
    змінна пм_крок_тіла_інакше = ПМ::створити_крок(контекст.кк_дії.обʼєкт_дії.пм_інструкція, "тіло_інакше");
    змінна пм_крок_виходу_з_тіла_якщо = ПМ::створити_крок(контекст.кк_дії.обʼєкт_дії.пм_інструкція, "тіло_якщо_вихід");

    ПМ::вказівка_стрибнути_якщо(контекст.кк_дії.поточний_крок.пм_крок, обʼєкт_значення_умови.пм_значення, пм_крок_тіла_якщо, пм_крок_тіла_інакше);

    змінна середовище_якщо = створити_середовище(компілятор, контекст.середовище);

    контекст.кк_дії.поточний_крок = Крок {
      назва_зовнішня("тіло_якщо"),
      контекст.кк_дії.обʼєкт_дії,
      пм_крок_тіла_якщо
    };

    змінна результат_тіла = скомпілювати_тіло(
      компілятор,
      Контекст {
        розібраний_текст = контекст.розібраний_текст,
        середовище = середовище_якщо,
        кк_дії = контекст.кк_дії
      },
      дані_якщо.тіло,
      місцезнаходження
    );

    якщо результат_тіла.помилка != пусто {
      вернути Результат { помилка = результат_тіла.помилка };
    }

    ПМ::вказівка_стрибнути(контекст.кк_дії.поточний_крок.пм_крок, пм_крок_виходу_з_тіла_якщо);

    змінна середовище_інакше = створити_середовище(компілятор, контекст.середовище);

    контекст.кк_дії.поточний_крок = Крок {
      назва_зовнішня("тіло_інакше"),
      контекст.кк_дії.обʼєкт_дії,
      пм_крок_тіла_інакше
    };

    змінна результат_тіла_інакше = скомпілювати_тіло(
      компілятор,
      Контекст {
        розібраний_текст = контекст.розібраний_текст,
        середовище = середовище_інакше,
        кк_дії = контекст.кк_дії
      },
      дані_якщо.тіло_інакше,
      місцезнаходження
    );

    якщо результат_тіла_інакше.помилка != пусто {
      вернути Результат { помилка = результат_тіла_інакше.помилка };
    }

    ПМ::вказівка_стрибнути(контекст.кк_дії.поточний_крок.пм_крок, пм_крок_виходу_з_тіла_якщо);

    контекст.кк_дії.поточний_крок = Крок {
      назва_зовнішня("тіло_якщо_вихід"),
      контекст.кк_дії.обʼєкт_дії,
      пм_крок_виходу_з_тіла_якщо
    };

    вернути Результат { помилка = пусто };
  }
}