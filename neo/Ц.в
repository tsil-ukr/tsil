взяти визначення розбирач;
взяти визначення лл;
взяти біб друк;

зовнішня дія отримати_з_карти_юнікод_комірка(карта: комірка<карта_юнікод_комірка>, назва: памʼять<п8>): невідома_комірка;
зовнішня дія змінити_в_карті_юнікод_комірка(карта: комірка<карта_юнікод_комірка>, назва: памʼять<п8>, значення: невідома_комірка);
зовнішня дія створити_карту_юнікод(): комірка<карта_юнікод_комірка>;

секція ц {
  структура карта_юнікод_комірка;

  структура Компілятор;
  структура Середовище;
  структура Субʼєкт;

  структура Компілятор {
    глобальне_середовище: комірка<Середовище>;
  }

  структура Середовище {
    батьківське: комірка<Середовище>;
    субʼєкти: комірка<карта_юнікод_комірка>;
  }

  дія створити_середовище(батьківське: комірка<Середовище>): комірка<Середовище> {
    ціль с = виділити<Середовище>();
    с.батьківське = батьківське;
    с.субʼєкти = створити_карту_юнікод();
    вернути с;
  }

  дія отримати_з_середовища(середовище: комірка<Середовище>, назва: памʼять<п8>): комірка<Субʼєкт> {
    змінна останнє_середовище = середовище;
    поки останнє_середовище != пусто {
      ціль субʼєкт = отримати_з_карти_юнікод_комірка(останнє_середовище.субʼєкти, назва) як комірка<Субʼєкт>;
      якщо субʼєкт != пусто {
        вернути субʼєкт;
      }
      останнє_середовище = останнє_середовище.батьківське;
    }
    вернути пусто;
  }

  дія змінити_в_середовищі(середовище: комірка<Середовище>, назва: памʼять<п8>, значення: комірка<Субʼєкт>) {
    змінити_в_карті_юнікод_комірка(середовище.субʼєкти, назва, значення);
  }
}