взяти визначення Ц;

секція ц {
  структура РезультатКомпіляціїЗначенняЯкТипу {
    тип: комірка<Тип>;
  }

  дія скомпілювати_асд_значення_як_тип(К: комірка<Компілятор>, середовище_секції: комірка<Середовище>, асд_значення: комірка<АСДЗначення>): РезультатКомпіляціїЗначенняЯкТипу {
    якщо асд_значення.вид == АСДВидЗвернутись {
      ціль дані = асд_значення.дані як комірка<АСДДаніЗвернутись>;
      ціль субʼєкт = отримати_з_середовища(середовище_секції, дані.ідентифікатор.значення);
      якщо субʼєкт == пусто {
      } інакше {
        якщо субʼєкт.вид == ВидСубʼєктаНативнийТип {
          ціль обʼєкт_нативного_типу = субʼєкт.дані як комірка<ОбʼєктНативногоТипу>;
          ціль тип = виділити<Тип>();
          тип.вид = ВидТипуНативний;
          тип.дані = обʼєкт_нативного_типу;
          вернути РезультатКомпіляціїЗначенняЯкТипу { тип };
        }
      }
    }
    вернути РезультатКомпіляціїЗначенняЯкТипу { К.тип_ніщо };
  }

  дія скомпілювати_тіло_секції(К: комірка<Компілятор>, середовище_секції: комірка<Середовище>, тіло: комірка<СписокАСДЗначень>) {
    змінна х: позитивне = 0;
    поки х < тіло.довжина {
      ціль асд_значення = тіло.елементи[х];
      якщо асд_значення.вид == АСДВидСтворитиДію {
        ціль дані = асд_значення.дані як комірка<АСДДаніСтворитиДію>;

        ціль обʼєкт_дії = виділити<ОбʼєктДії>();
        обʼєкт_дії.назва = дані.ідентифікатор.значення;
        обʼєкт_дії.параметри = виділити_список<комірка<Параметр>>();

        ціль список_лтипів_параметрів = виділити_список<комірка<ЛТип>>();
        відкласти звільнити_список<комірка<ЛТип>>(список_лтипів_параметрів);

        змінна пх: позитивне = 0;
        поки пх < дані.кількість_параметрів {
          ціль асд_параметр = дані.параметри[пх];
          ціль параметр = виділити<Параметр>();
          параметр.назва = асд_параметр.ідентифікатор.значення;
          ціль результат_компіляції_як_типу = скомпілювати_асд_значення_як_тип(К, середовище_секції, асд_параметр.тип);
//        якщо результат_компіляції_як_типу.помилка {
//        }
          параметр.тип = результат_компіляції_як_типу.тип;
          додати_до_списку<комірка<Параметр>>(обʼєкт_дії.параметри, параметр);
          додати_до_списку<комірка<ЛТип>>(список_лтипів_параметрів, отримати_ЛТип(результат_компіляції_як_типу.тип));
          пх = пх + 1;
        }

        якщо дані.тип_результату == пусто {
          обʼєкт_дії.тип_результату = К.тип_ніщо;
        } інакше {
          ціль результат_компіляції_як_типу = скомпілювати_асд_значення_як_тип(К, середовище_секції, дані.тип_результату);
//          якщо результат_компіляції_як_типу.помилка {
//          }
          обʼєкт_дії.тип_результату = результат_компіляції_як_типу.тип;
        }

        ціль лф = лл::створити_функцію(К.Л, обʼєкт_дії.назва, отримати_ЛТип(обʼєкт_дії.тип_результату), список_лтипів_параметрів.довжина, список_лтипів_параметрів.дані, ні);
        обʼєкт_дії.л_функція = лф;

        ціль субʼєкт_дії = виділити<Субʼєкт>();
        субʼєкт_дії.вид = ВидСубʼєктаДія;
        субʼєкт_дії.дані = обʼєкт_дії;

        змінити_в_середовищі(середовище_секції, обʼєкт_дії.назва, субʼєкт_дії);

        // ... тіло

      }
      х = х + 1;
    }
  }
}

зовнішня дія скомпілювати_ціль_в_ll(текст_коду: комірка<ТекстКоду>): памʼять<п8> {
  ціль результат_розбору_цілі = розібрати_ціль(текст_коду);
  якщо результат_розбору_цілі.успіх == ні {
    вернути ю8"ПОМИЛКА!";
  }
  ціль К = ц::створити_компілятор();
  ціль початкове_середовище = ц::створити_середовище(К.глобальне_середовище);
  ц::скомпілювати_тіло_секції(К, початкове_середовище, результат_розбору_цілі.тіло);
//  ціль Л = лл::створити(ю8"тест.ц");
//  ціль с = лл::створити_структуру(Л, ю8"Координати");
//  ціль д = лл::створити_дію(Л, ю8"hello", лл::отримати_тип_ніщо(Л), 0, пусто, ні);
  вернути лл::відмалювати(К.Л);
}